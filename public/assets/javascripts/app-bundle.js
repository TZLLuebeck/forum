var app,dependencies;dependencies=["ui.router","restangular","ngStorage","permission","permission.ui","ngFileUpload","toaster"],(app=angular.module("mediMeet",dependencies)).config(["$httpProvider",function(e){return e.interceptors.push("tokenInterceptor"),e.interceptors.push("responseInterceptor")}]),app.run(["User","TokenContainer","$rootScope","$state","$stateParams","Rails","$transitions",function(e,t,r,n,o,i,s){return r.$state=n,r.$stateParams=o,s.onBefore({},function(e){return r.lastState=e.from(),r.lastStateParams=e.params("from")})}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").run(["$q","PermRoleStore","User",function(e,t,r){return t.defineRole("anonymous",function(e){return!r.isAuthenticated()}),t.defineRole("user",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"user")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("admin",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"admin")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("student",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"student")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("institute",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"institute")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("startup",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"startup")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("company",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"company")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise})}]),angular.module("mediMeet").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){return t.otherwise(function(e){return e.get("$state").go("root.home")}),r.html5Mode(!0),r.hashPrefix(""),e.state("root",{url:"",abstract:!0,views:{"header@":{templateUrl:"assets/views/common/nav.html",controller:"NavCtrl",controllerAs:"nav"},"footer@":{templateUrl:"assets/views/common/footer.html"}},resolve:{identity:["TokenContainer","User","$rootScope",function(e,t,r){if(e.get())return t.retrieveUser().then(function(e){return t.user=e,r.$broadcast("user:stateChanged")})}]}}).state("match",{url:"/match/{id}",onEnter:["$state","$stateParams",function(e,t){return e.go("root.interest.hidden",{id:t.id})}]}).state("root.home",{url:"/",views:{"body@":{templateUrl:"assets/views/common/home.html",controller:"HomeCtrl",controllerAs:"home"}}}).state("root.explore",{url:"/explore",params:{category:null},views:{"body@":{templateUrl:"assets/views/common/search.html",controller:"SearchCtrl",controllerAs:"search"}},resolve:{category:["$stateParams","$state",function(e,t){if(e.category)return e.category}],initials:["Interests","$stateParams","$state",function(e,t,r){return t.category?e.getByCategory(t.category).then(function(e){return e},function(e){return r.go("root.home")}):(r.go("root.home"),null)}]}}).state("root.impressum",{url:"/impressum",views:{"body@":{templateUrl:"assets/views/common/impressum.html"}}}).state("root.kontakt",{url:"/kontakt",views:{"body@":{templateUrl:"assets/views/common/kontakt.html"}}}).state("root.agb",{url:"/nutzungsbedingungen",views:{"body@":{templateUrl:"assets/views/common/agb.html"}}}).state("root.antimaas",{url:"/datenschutz",views:{"body@":{templateUrl:"assets/views/common/datenschutz.html"}}}).state("root.register",{url:"/registration",views:{"body@":{templateUrl:"assets/views/users/register.html",controller:"RegistrationCtrl",controllerAs:"reg"}},resolve:{companies:["Company",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.login",{url:"/login",views:{"body@":{templateUrl:"assets/views/users/login.html",controller:"LoginCtrl",controllerAs:"login"}}}).state("root.profile",{url:"/profile",params:{id:null},views:{"body@":{templateUrl:"assets/views/users/profile.html",controller:"ProfileCtrl",controllerAs:"profile"}},resolve:{mydata:["User","$stateParams","$state",function(e,t,r){return e.getUserPacket(t.id).then(function(e){return e.data},function(e){return r.go("root.home")})}],posts:["User","$stateParams",function(e,t){return e.getInterests(t.id).then(function(e){return e.data},function(e){return e})}]}}).state("root.profile.edit",{url:"/edit",params:{id:null},views:{"body@":{templateUrl:"assets/views/users/edit.html",controller:"ProfileEditCtrl",controllerAs:"predit"}},data:{permissions:{except:"anonymous",redirectTo:"root.home"}}}).state("root.profile.interests",{url:"/interests",views:{"subbody@":{templateUrl:"assets/views/interests/list.html",controller:"InterestsCtrl",controllerAs:"interests"}}}).state("root.company.cmpinterests",{url:"/companies/view/interests",params:{id:null},views:{"subbody@":{templateUrl:"assets/views/interests/company.html",controller:"CompanyInterestCtrl",controllerAs:"cmpint"}}}).state("root.interest",{url:"",abstract:!0,params:{id:null},views:{"body@":{templateUrl:"assets/views/interests/view.html",controller:"InterestCtrl",controllerAs:"intrst"}},resolve:{info:["Interests","$stateParams","$state",function(e,t,r){return e.getInterest(t.id).then(function(e){return e.data},function(e){if(401!==e.status)return r.go("root.home")})}]}}).state("root.interest.hidden",{url:"/interest",templateUrl:"assets/views/interests/hidden.html",controller:"InterestHiddenCtrl",controllerAs:"ctrl"}).state("root.interest.revealed",{url:"/interest/contact",data:{permissions:{except:"anonymous",redirectTo:"root.interest.hidden"}},templateUrl:"assets/views/interests/revealed.html",controller:"InterestRevealedCtrl",controllerAs:"ctrl",resolve:{contact:["Interests","$stateParams",function(e,t){return e.makeContact(t.id).then(function(e){return e.data},function(e){return e})}]}}).state("root.interest.createinterest",{url:"/create",views:{"body@":{templateUrl:"assets/views/interests/create.html",controller:"NewPostCtrl",controllerAs:"npost"}},data:{permissions:{except:"anonymous",redirectTo:"root.register"}}}).state("root.interest.editinterest",{url:"/edit",params:{id:null},data:{permissions:{except:"anonymous",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/interests/edit.html",controller:"InterestEditCtrl",controllerAs:"intedit"}}}).state("root.companies",{url:"/companies",views:{"body@":{templateUrl:"assets/views/companies/companies.html",controller:"CompaniesCtrl",controllerAs:"cmps"}},resolve:{list:["Company",function(e){return e.getApproved().then(function(e){return e},function(e){return[]})}]}}).state("root.companies.company",{url:"/view",views:{"body@":{templateUrl:"assets/views/companies/company.html",controller:"CompanyCtrl",controllerAs:"cmp"}},params:{id:null},resolve:{comp:["Company","$state","$stateParams",function(e,t,r){return r.id||t.go("root.companies"),e.getOne(r.id).then(function(e){return e.data},function(e){return t.go("root.companies")})}]}}).state("root.companies.newcomp",{url:"/create",data:{permissions:{only:"admin",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/companies/create.html",controller:"NewCompanyCtrl",controllerAs:"ncomp"}}}).state("root.companies.editcomp",{url:"/edit",data:{permissions:{except:"anonymous",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/companies/edit.html",controller:"EditCompanyCtrl",controllerAs:"ecomp"}},params:{id:null},resolve:{comp:["Company","Helper","$stateParams",function(e,t,r){return r.id||t.goBack(),e.getOne(r.id).then(function(e){return e.data},function(e){return t.goBack()})}]}}).state("root.admin",{url:"/admin",abstract:!0,data:{permissions:{only:"admin",redirectTo:"root.home"}}}).state("root.admin.userlist",{url:"/users",views:{"body@":{templateUrl:"assets/views/admin/users.html",controller:"UserListCtrl",controllerAs:"users"}},resolve:{users:["User",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.usercreate",{url:"/user/new",views:{"body@":{templateUrl:"assets/views/admin/newuser.html",controller:"AdminUserCtrl",controllerAs:"usrcrt"}},resolve:{companies:["Company",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.interestlist",{url:"/interests",views:{"body@":{templateUrl:"assets/views/admin/interests.html",controller:"InterestListCtrl",controllerAs:"interests"}},resolve:{interest:["Interests",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.interestcreate",{url:"/interest/new",views:{"body@":{templateUrl:"assets/views/admin/newinterest.html",controller:"AdminInterestCtrl",controllerAs:"intrcrt"}},resolve:{users:["User",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.companylist",{url:"/companies",views:{"body@":{templateUrl:"assets/views/admin/companies.html",controller:"CompanyListCtrl",controllerAs:"companies"}}}).state("root.admin.statistics",{url:"/statistics",views:{"body@":{templateUrl:"assets/views/admin/statistics.html",controller:"StatisticsCtrl",controllerAs:"stats"}}})}]),angular.module("mediMeet").directive("onScrollToBottom",["$document","$window",function(e,t){return{restrict:"A",link:function(r,n,o){return e.bind("scroll",function(){if(t.pageYOffset+t.innerHeight>=e.height())return r.$apply(o.onScrollToBottom)}),r.$on("$destroy",function(){return e.unbind("scroll")})}}}]),angular.module("mediMeet").directive("tooltips",["$document","$window",function(e,t){return{restrict:"A",link:function(t,r,n){return e.bind("scroll",function(){return e.ready(function(){return $('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()})})}}}]),angular.module("mediMeet").factory("Keywords",function(){return this.categories=["Hospital/IT 4.0","Medizintechnik 4.0","Facility Management 4.0","Klinische Prozesse 4.0"],this.subcategories=["Cloud/IT-Services/Big Data","Mobile Anwendungen","Daten-/Dokumentenaustausche","Cyber-Security & Privacy","Interoperabilität","Assistenzsysteme","Wartung und Service","Usability","IT-gestützte Instandhaltung","IoT im Krankenhaus","Blue/Green Hospital","Supply-Chain-Management","e-Health/Medical Apps","Digitale Versorgungsplattform","Qualitäts-/Leistungserfassung","Integrierte Prozesse"],this.keywords=["IT-Services","Digital Twin","Big Data","Connected Medical Devices","Mobile Anwendungen/Mobile Devices","Clinical Decision Support","Daten- und Dokumentenaustausch","Condition Monitoring","Cyber-Security/IT-Sicherheit","Telemedizin","Safety/Funktionssicherheit","personalisierte Medizin","Datenschutz/Privacy","elektronische Patientenakte (EPA)","IT-gestützte Instandhaltung/Computerized Maintenance","Medizingeräte/Medical Devices","Internet of Things","Cyber-physical-systems (CPS)","Sustainability/Nachhaltigkeit","Krankenhausinformationssystem (KIS)","Green-/Blue-Hospital","Predicitve Maintenance","Supply-Chain-Management","Processing","Logistik","Clinical Pathways/Behandlungspfade","Interoperabilität","Assistenzsysteme","Wartung und Service","Usability","e-Health","Medical Apps","Clinical Unified Collaboration","Qualitätsmanagement"],this.relations=[{category:"Hospital/IT 4.0",description:"Steht für den Einsatz digitaler Technologien zum strukturierten und sicheren Austausch von Informationen u.a. über Krankenhausinformationssysteme.",subcategories:[{subcategory:"Cloud/IT-Services/Big Data",description:"Beschreibt die Bereitstellung von IT-Diensten wie digitale Infratruktur, Plattformen und  Software als Dienste über Modelle wie der Public oder Private Cloud.",keywords:["Cloud","IT-Services","Big Data","Internet of Things","Cyber-Security/IT-Sicherheit","Daten-und Dokumentenaustausch"]},{subcategory:"Mobile Anwendungen",description:"Bezeichnet die Verwendung mobiler Endgeräte (Smartphones, Tablets, ...) für verschiedenste  Anwendungen wie Bereitstellung oder Aufnahme relevanter Daten.",keywords:["Medical Apps","e-Health","Connected Medical Devices","elektronische Patientenakte (EPA)","Krankenhausinformationssystem (KIS)"]},{subcategory:"Daten-/Dokumentenaustausche",description:"Steht für digitaliserte und standardisierte Erfassung und Dokumentation, um Übertragungsfehler und Informationsverlust zu vermeiden.",keywords:["elektronische Patientenakte (EPA)","Krankenhausinformationssystem (KIS)","Qualitätsmanagement"]},{subcategory:"Cyber-Security & Privacy",description:"Beschreibt zum einen die Sicherheit der digitalen Systeme selbst und zum anderen die  Anforderungen an den Schutz der Patientendaten.",keywords:["Cyber-Security/IT-Sicherheit","Safety/Funktionssicherheit","Datenschutz/Privacy Cloud"]}]},{category:"Medizintechnik 4.0",description:"Beschreibt die Vernetzung von Medizingeräten, die ihre Daten weitergeben können und ihre Funktionen als digitalen Dienst über Schnittstellen bereitstellen.",subcategories:[{subcategory:"Interoperabilität",description:"Bezeichnet die Fähigkeit unabhängiger, heterogener Systeme hinsichtlich physischer oder virtueller Schnittstellen verwertbare Informationen auszutauschen.",keywords:["Medizingeräte/Medical Devices","Connected Medical Devices"]},{subcategory:"Assistenzsysteme",description:"Dienen der Unterstützung des Krankenhauspersonals in bestimmten Situationen und bei Abläufen, vom Monitoring bis zu klinischen Entscheidungen.",keywords:["Cyber-physical-systems (CPS)"]},{subcategory:"Wartung und Service",description:"Mithilfe moderner IT erlauben neue Möglichkeiten wie Tele-Inspektion und prädiktive Instandhaltung, um Fehler und Ausfälle zu reduzieren.",keywords:["Condition Monitoring","Predicitve Maintenance"]},{subcategory:"Usability",description:"Bezeichnet die Bedienbarkeit von Geräten und erhält durch Vernetzung und Technologien wie Virtual und Augmented Reality ganz neue Möglichkeiten.",keywords:["Connected Medical Devices","Cyber-physical-systems (CPS)","Telemedizin"]}]},{category:"Facility Management 4.0",description:"Bezeichnet die Verwendung u.a. von Cloud- und IoT-Technologien bei der Wartung und Instandhaltung von Anlagen und Infrastruktur sowie der Logistik.",subcategories:[{subcategory:"IT-gestützte Instandhaltung",description:"Beschreibt, wie durch IT Anlagen und Infrastrukturen selbst für ihre Instandhaltung relevante Daten erfassen und so Wartungsbedarf selbst melden können.",keywords:["Condition Monitoring","Predicitve Maintenance","Internet of Things","Smart Device"]},{subcategory:"IoT im Krankenhaus",description:"Bezeichnet die Vernetzung bzw. Kommunikation von „Dingen“ bzw. Geräten, sogenannten „smart devices“, u.a. um Personen- oder Objekte zu lokalisieren.",keywords:["Smart Devices","Digital Twin","Cloud","elektronische Patienteakte","connected medical device","clinical decision support","Telemedzin","Cyber-physical-systems (CPS)"]},{subcategory:"Blue/Green Hospital",description:"Steht für mehr Nachhaltigkeit im Krankenhausbetrieb, nicht nur bzgl. Verbrauch an Energie und Waren, sondern auch bzgl. Personal- und Patientenzufriedenheit.",keywords:["Nachhaltigkeit/Sustainability","Supply-Chain-Management","Clinical Pathways","Internet of Things","Qualitätsmanagement"]},{subcategory:"Supply-Chain-Management",description:"Bezeichnet den Ansatz, Wertschöpfungs- und Lieferketten ganzheitlich über Unternehmens- und Einrichtungsgrenzen hinweg zu organisieren und zu steuern.",keywords:["Logistik","Mobile Anwendungen/Mobile Devices","Internet of Things","Medical Apps","Qualitätsmanagement","Smart Devices"]}]},{category:"Klinische Prozesse 4.0",description:"Steht für IT-gestützte klinische Prozesssysteme und Anwendungen, die administrative und gesundheitsversorgende Abläufe im Unternehmen Krankenhaus regeln.",subcategories:[{subcategory:"e-Health/Medical Apps",description:"Steht zum einen für die Digitalisierung im Gesundheitswesen und zum anderen medizinische Softwareprodukte für hauptsächlich mobile Endgeräte.",keywords:["e-Health","Medical Apps","personalisierte Medizin","elektronische Patientenakte (EPA)","Telemedizin","Smart Devices","Internet of Things","Datenschutz","Usability"]},{subcategory:"Digitale Versorgungsplattform",description:"Versteht man die Integration verschiedener Kommunikationswege wie Audio- und Video- Konferenzen, virtuellen white boards etc. auf eine einheitliche Plattform.",keywords:["IT-Service","Daten- und Dokumentenaustausch","Interoperabilität","Usability","Integrierte Prozesse","Telemedizin"]},{subcategory:"Qualitäts-/Leistungserfassung",description:"Soll u.a. durch mobile Anwendungen zunehmend automatisiert erfolgen, um mehr Transparenz zu gewährleisten und Dokumentationslücken zu vermeiden.",keywords:["Qualitätsmanagement","Daten- und Dokumentenaustausch","Datenschutz/Privacy","elektronische Patientenakte (EPA)"]},{subcategory:"Integrierte Prozesse",description:"Sorgen für effektivere Behandlungsabläufe, indem automatisierte Vorgänge nicht einzeln betrachtet, sondern über gesamte Prozesse integriert werden.",keywords:["Clinical Pathways/Behandlungspfade","Krankenhausinformationssystem (KIS)","Qualitätsmanagement"]}]}],{categories:this.categories,subcategories:this.subcategories,keywords:this.keywords,relations:this.relations}}),angular.module("mediMeet").factory("mediREST",["Rails","Restangular",function(e,t){return t.withConfig(function(t){return""+e.database,t.setBaseUrl("/api/v1"),t.setDefaultHeaders({"Content-Type":"application/json"}),t.setRequestSuffix(".json")})}]),angular.module("mediMeet").service("Company",["mediREST","$q","Upload","Rails",function(e,t,r,n){var o,i,s,a,u,c,l;return i=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/companies/",data:{data:e}}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},a=function(){var r;return r=t.defer(),e.one("companies").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},u=function(){var r;return r=t.defer(),e.one("companies").one("approve").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},c=function(r){var n,o;return n=t.defer(),o=e.one("companies"),o.id=r,o.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},l=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/companies/"+e.id,data:{data:e},method:"PUT"}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},o=function(r){var n,o;return n=t.defer(),o=e.one("companies").one("approve"),o.id=r,o.put().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},s=function(r){var n,o;return n=t.defer(),o=e.one("companies"),o.id=r,o.remove().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},{createCompany:i,getAll:a,getApproved:u,getOne:c,update:l,approve:o,destroy:s}}]),angular.module("mediMeet").service("Helper",["$rootScope","$state",function(e,t){var r;return r=function(r){var n,o;if(n=e.lastState,o=e.lastStateParams,n)return t.go(n.name,o)},{goBack:r}}]),angular.module("mediMeet").service("Interests",["mediREST","$q",function(e,t){var r,n,o,i,s,a,u,c,l;return n=function(r){var n,o;return n=t.defer(),o=e.one("interests"),o.data=r,o.post().then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.data.error)}),n.promise},r=function(r){var n,o;return n=t.defer(),o=e.one("interests").one("create"),o.data=r,o.post().then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.data.error)}),n.promise},s=function(){var r;return r=t.defer(),e.one("interests").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e.data.error)}),r.promise},a=function(r){var n,o,i;return n=t.defer(),o=e.one("interests").one("category"),i={category:r},o.customGET("",i).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.data)}),n.promise},u=function(r){var n,o;return n=t.defer(),o=e.one("interests"),o.id=r,o.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},l=function(r){var n,o;return n=t.defer(),o=e.one("interests").one("contact"),o.id=r,o.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},c=function(){var r;return r=t.defer(),e.one("interests").one("keywords").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},i=function(e){var r;return r=t.defer(),e.put().then(function(e){return r.resolve(e)},function(e){return r.reject(e)}),r.promise},o=function(r){var n,o;return n=t.defer(),o=e.one("interests"),o.id=r,o.remove().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},{createInterest:n,assignInterest:r,getAll:s,getInterest:u,makeContact:l,getKeywords:c,getByCategory:a,editInterest:i,deleteInterest:o}}]),angular.module("mediMeet").service("SharedData",function(){var e,t,r,n;return e={},n=function(t,r){return e[t]=r},r=function(t){return e[t]},t=function(t){return e[t]=null},{setValue:n,getValue:r,deleteValue:t}}),angular.module("mediMeet").service("TokenContainer",["$localStorage","Rails","$rootScope","$timeout",function(e,t,r,n){var o,i,s,a,u;return u=function(t){var r,n,o;return o={token:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token},r=+new Date,n=r+1e3*o.expiresIn,e.token=angular.extend(o,{expiresAt:n})},s=function(){var e;return(e=o())?e.token:null},a=function(){var e;return(e=o())?e:null},o=function(){return e.token||null},i=function(){return delete e.token,n(function(){return r.$broadcast("user:token_invalid"),r.$broadcast("user:stateChanged")})},{get:s,getRaw:a,set:u,delete:i}}]),angular.module("mediMeet").service("User",["mediREST","$q","$http","Rails","$rootScope","Upload",function(e,t,r,n,o,i){var s,a,u,c,l,d,m,f,h,g,p,y,v;return v=e.one("users"),this.user=null,this.deferreds={},this.unauthorized=!0,g=function(e){var r;return r=t.defer(),i.upload({url:"/api/v1/users/",data:{data:e}}).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},s=function(e){var r,n;return r=t.defer(),n=v.one("create"),n.data=e,n.post().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},u=function(){var e;return e=t.defer(),v.get().then(function(t){return e.resolve(t.data)},function(t){return e.reject(t)}),e.promise},d=function(r){var n,o;return n=t.defer(),o=e.one("users"),o.id=r||"me",o.get().then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.error)}),n.promise},m=function(r){var n,o;return n=t.defer(),o=e.one("users"),o.id=r||"me",o.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},p=function(r){return function(){var n,o;return n=t.defer(),f()?(n.resolve(r.user),n.promise):r.deferreds.me?r.deferreds.me.promise:(r.deferreds.me=n,o=e.one("users"),o.id="me",o.get().then(function(e){return r.unauthorized=!1,r.user=e.data,r.deferreds.me.resolve(e.data),delete r.deferreds.me},function(e){return r.deferreds.me.reject(),delete r.deferreds.me}),r.deferreds.me.promise)}}(this),l=function(e){return function(){var r;return r=t.defer(),f()?r.resolve(e.user.roles):p().then(function(e){return r.resolve(e.roles)},function(){return r.reject()}),r.promise}}(this),c=function(r){return function(n){var o,i;return o=t.defer(),i=e.one("users").one("interests"),i.id=n||r.user.id,i.get().then(function(e){return o.resolve(e)},function(e){return o.reject(e)}),o.promise}}(this),y=function(r){var n,o;return o=e.one("users"),n=t.defer(),Object.assign(o,r.data[0]),r.put().then(function(e){return 422===e.status?n.reject(e.data):n.resolve(e.data.data)}),n.promise},h=function(r){return function(){var n;return n=t.defer(),e.all("users").one("logout").remove().then(function(e){return r.user=null,r.unauthorized=!0,n.resolve(e)},function(e){return n.reject(e)}),n.promise}}(this),a=function(r){return function(n){var o,i;return o=t.defer(),i=e.one("users"),i.id=n,i.remove().then(function(e){return 401===e.status?(r.unauthorized=!0,o.reject(e.data)):o.resolve()}),o.promise}}(this),f=function(e){return function(){return!e.unauthorized&&null!=e.user}}(this),{getAll:u,getUser:d,getUserPacket:m,getRoles:l,getInterests:c,retrieveUser:p,updateUser:y,logout:h,deleteUser:a,registerUser:g,adminReg:s,isAuthenticated:f}}]),angular.module("mediMeet").controller("AdminInterestCtrl",["Interests","Keywords","users","$state",function(e,t,r,n){return this.userlist=r,this.categories=t.relations,this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.changeCategory=function(e){return function(){return e.subcategories=e.category.subcategories,e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.create_post=function(t){return function(){return t.form.interest.category=t.category.category,t.form.interest.subcategory=t.subcategory.subcategory,e.assignInterest(t.form.interest).then(function(e){return n.go("root.admin.interestlist")})}}(this),this.abort=function(){return Helper.goBack()},this}]),angular.module("mediMeet").controller("AdminUserCtrl",["User","$state","companies",function(e,t,r){return this.form={user:{},contact_data:{},company:{}},this.regInProgress=!1,this.errors={},this.companies=r,this.goBack=function(){return Helper.goBack()},this.register=function(r){return function(){return r.validate()?(r.regInProgress=!0,"Data"===r.form.user.typus&&"Statistics"===r.form.user.typus||(r.form.user.contact_data=r.form.contact_data),e.adminReg(r.form.user).then(function(e){return r.regInProgress=!1,t.go("root.admin.userlist")},function(e){return e.status,r.regInProgress=!1})):void 0}}(this),this.validate=function(e){return function(){var t,r,n;return n=!0,e.errors={},r=e.form.user,t=e.form.contact_data,e.form.company,r.typus||(e.errors.typus=!0,n=!1),r.username&&r.email&&r.password&&r.password_confirmation===r.password||(r.username||(e.errors.username=!0),r.email||(e.errors.email=!0),r.password||(e.errors.password=!0),r.password_confirmation&&r.password===r.password_confirmation||(e.errors.password_confirmation=!0),n=!1),"Data"!==r.typus&&"Statistics"!==r.typus&&(t.firstname&&t.lastname&&t.plz&&t.ort&&(t.web||t.fon)||(t.firstname||(e.errors.firstname=!0),t.lastname||(e.errors.lastname=!0),t.plz||(e.errors.plz=!0),t.ort||(e.errors.ort=!0),t.web||t.fon||(e.errors.web=!0,e.errors.fon=!0),n=!1),t.company_id||(e.errors.company=!0,n=!1)),n}}(this),this}]),angular.module("mediMeet").controller("CompanyListCtrl",["$state","Company","$scope",function(e,t,r){return this.unlocked=!1,this.resetSettings=function(e){return function(){return e.finishedLoading=!1,e.companyList=[]}}(this),this.resetSettings(),this.init=function(e){return function(){return t.getAll().then(e.compsReceived,function(){})}}(this),this.compsReceived=function(e){return function(t){e.finishedLoading=!0,e.companyList=angular.copy(t)}}(this),this.getCompany=function(t){return e.go("root.companies.company",{id:t})},this.approveCompany=function(e){return t.approve(e.id).then(function(t){return e.validated=!0},function(e){})},this.deleteCompany=function(e){return function(r){return t.destroy(r.id).then(function(t){return e.companyList.splice(e.companyList.indexOf(r),1)},function(e){})}}(this),this.init(),this}]),angular.module("mediMeet").controller("InterestListCtrl",["$state","User","Interests","$scope","interest",function(e,t,r,n,o){return this.posts=o,this.edit=function(t){return e.go("root.interest.editinterest",{id:t})},this.viewPost=function(t){return e.go("root.interest.hidden",{id:t})},this.getUser=function(t){return e.go("root.interest",{id:t})},this.deletePost=function(e){return function(t){return r.deleteInterest(t.id).then(function(r){var n;return n=e.posts.indexOf(t),e.posts.splice(n,1)},function(e){})}}(this),this}]),angular.module("mediMeet").controller("UserListCtrl",["$state","User","$scope","users",function(e,t,r,n){return this.resetSettings=function(e){return function(){return e.finishedLoading=!1,e.userList=n}}(this),this.resetSettings(),this.init=function(e){return function(){return e.reverse=!1,t.getAll().then(e.usersReceived,function(){})}}(this),this.usersReceived=function(e){return function(t){return e.finishedLoading=!0,e.userList=angular.copy(t)}}(this),this.getUser=function(t){return e.go("root.profile",{id:t})},this.deleteUser=function(e){return function(r){return t.deleteUser(r.id).then(function(t){var n;return n=e.userList.indexOf(r),e.userList.splice(n,1)})}}(this),this}]),angular.module("mediMeet").controller("CompaniesCtrl",["Company","list","$state",function(e,t,r){return this.companyList=t,this.viewCompany=function(e){return r.go("root.companies.company",{id:e})},this}]),angular.module("mediMeet").controller("HomeCtrl",["$state","Interests",function(e,t){return this.keywords=[],this.init=function(e){return function(){return t.getKeywords().then(function(t){return e.keywords=t},function(e){})}}(this),this.searchPage=function(t){return e.go("root.explore",{category:t})},this.init(),this}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").controller("NavCtrl",["$timeout","$scope","mediREST","User","TokenContainer","$state","$rootScope","toaster",function(e,t,r,n,o,i,s,a){return this.form={},this.username="default",this.admin=!1,this.init=function(e){return function(){return e.isAuthenticated=!1,e.setLoggedIn(o.get()),e.setUsername(),e.isAdmin()}}(this),this.login=function(e){return function(){var t;return t=r.one("users").one("login"),t.data={username:e.form.user.username,password:e.form.user.password},t.post().then(function(t){return e.form={},n.user=t.data.user,o.set(t.data.token),s.$broadcast("user:stateChanged")},function(t){if(404===t.status&&(e.form.user.password="",a.pop("error","Nicht vorhanden.","Es wurde kein Account mit diesem Accountnamen gefunden.")),401===t.status&&"wrong_password"===t.data.error.name)return e.form.user.password="",a.pop("error","Falsches Passwort","Das eingegebene Passwort war falsch.")})}}(this),this.setUsername=function(e){return function(){if(e.isAuthenticated)return n.retrieveUser().then(function(t){return e.username=angular.copy(t.username)},function(e){this.username="Angemeldet"})}}(this),this.setLoggedIn=function(e){return function(t){e.isAuthenticated=!!t}}(this),this.logout=function(){return n.logout().then(function(){return o.delete(),i.go("root.home")})},this.isAdmin=function(e){return function(){return n.user&&indexOf.call(n.user.roles,"admin")>=0?e.admin=!0:e.admin=!1}}(this),s.$on("user:stateChanged",function(e){return function(t,r,n){return e.setLoggedIn(o.get()),e.setUsername(),e.isAdmin()}}(this)),this.init(),this}]),angular.module("mediMeet").controller("SearchCtrl",["Interests","$stateParams","$state","Keywords","initials","category",function(e,t,r,n,o,i){return this.list=o,this.category=i,this.subcategories=[],this.subfilter,this.page=1,this.init=function(e){return function(){var r,o,i,s,a;for(a=[],r=0,o=(i=n.relations).length;r<o;r++){if((s=i[r]).category===t.category){e.subcategories=s.subcategories;break}a.push(void 0)}return a}}(this),this.viewPost=function(e){return r.go("root.interest.hidden",{id:e})},this.loadMore=function(e){return function(){return e.page++}}(this),this.init(),this}]),angular.module("mediMeet").controller("CompanyCtrl",["comp","$state",function(e,t){return this.company=e.company,this.company.posts=e.posts,this.viewInterest=function(e){return t.go("root.interest.hidden",{id:e})},this}]),angular.module("mediMeet").controller("EditCompanyCtrl",["Company","Helper","comp",function(e,t,r){return this.form={company:r.company},delete this.form.company.logo,this.submit=function(r){return function(){return e.update(r.form.company).then(function(e){return t.goBack()},function(e){})}}(this),this.goBack=function(){return t.goBack()},this}]),angular.module("mediMeet").controller("NewCompanyCtrl",["Company","$state",function(e,t){return this.form={company:{}},this.submit=function(r){return function(){return e.createCompany(r.form.company).then(function(e){return t.go("root.admin.companylist")},function(e){})}}(this),this}]),angular.module("mediMeet").controller("InterestCtrl",["info","$scope","User","$state",function(e,t,r,n){return this.interest=e,this.init=function(e){return function(){return e.interest.user_id===r.user.id?t.myint=!0:t.myint=!1}}(this),this.back=function(e){return function(){return n.go("root.explore",{category:e.interest.category})}}(this),this.init(),this}]),angular.module("mediMeet").controller("InterestEditCtrl",["Interests","$state","$stateParams","Keywords","Helper",function(e,t,r,n,o){return this.categories=n.relations,this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.rest={},this.reason="",this.init=function(n){return function(){return e.getInterest(r.id).then(n.postReceived,function(){return t.go("root.admin.users")})}}(this),this.postReceived=function(e){return function(t){var r,n,o,i,s,a,u,c,l;for(e.rest=t,e.form.interest=angular.copy(e.rest.data),n=0,i=(a=e.categories).length;n<i;n++)if((r=a[n]).category===e.form.interest.category){e.category=r,e.subcategories=e.category.subcategories;break}for(c=[],o=0,s=(u=e.subcategories).length;o<s;o++){if((l=u[o]).subcategory===e.form.interest.subcategory){e.subcategory=l,e.keywords=e.subcategory.keywords;break}c.push(void 0)}return c}}(this),this.changeCategory=function(e){return function(){return e.subcategories=e.category.subcategories,e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.update=function(t){return function(){return t.form.interest.category=t.category.category,t.form.interest.subcategory=t.subcategory.subcategory,t.rest.data=t.form.interest,e.editInterest(t.rest).then(function(e){return o.goBack()},function(e){})}}(this),this.abort=function(){return o.goBack()},this.deleteInterest=function(){return e.deleteInterest(this.form.interest.id).then(function(){return t.go("root.profile")},function(e){})},this.init(),this}]),angular.module("mediMeet").controller("InterestHiddenCtrl",["$state","$stateParams","$scope",function(e,t,r){return this.mine=r.myint,this.reveal=function(){return e.go("root.interest.revealed")},this.edit=function(){return e.go("root.interest.editinterest",{id:t.id})},this}]),angular.module("mediMeet").controller("InterestRevealedCtrl",["contact",function(e){return this.user=e,this.init=function(e){return function(){return Interests.makeContact($stateParams.id).then(function(t){e.user=angular.copy(t.data)})}}(this),this}]),angular.module("mediMeet").controller("NewPostCtrl",["User","Interests","$state","Keywords","Helper",function(e,t,r,n,o){return this.categories=n.relations,this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.changeCategory=function(e){return function(){return e.subcategories=e.category.subcategories,e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.create_post=function(e){return function(){return e.form.interest.category=e.category.category,e.form.interest.subcategory=e.subcategory.subcategory,t.createInterest(e.form.interest).then(function(e){return r.go("root.profile")})}}(this),this.abort=function(){return o.goBack()},this}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").controller("ProfileCtrl",["User","$state","$stateParams","mydata","posts",function(e,t,r,n,o){return this.user=n,this.interestList=o,this.id=r.id,this.canEdit=!1,this.init=function(t){return function(){if(e.user.id===t.user.id||indexOf.call(e.user.roles,"admin")>=0)return t.canEdit=!0}}(this),this.editProfile=function(e){return function(){return t.go("root.profile.edit",{id:e.id})}}(this),this.getInterests=function(t){return function(){if(!t.interestList.length)return e.getInterests(t.id).then(t.gotInterests,function(){})}}(this),this.gotInterests=function(e){return function(t){return e.interestList=angular.copy(t.data)}}(this),this.editInterest=function(e){return t.go("root.interest.editinterest",{id:e})},this.init(),this}]),angular.module("mediMeet").controller("ProfileEditCtrl",["$stateParams","$state","User","Helper",function(e,t,r,n){return this.form={user:{}},this.regInProgress=!1,this.rest={},this.init=function(n){return function(){return r.getUserPacket(e.id).then(n.userReceived,function(){return t.go("root.admin.users")})}}(this),this.userReceived=function(e){return function(t){return e.rest=t,e.form.user=angular.copy(e.rest.data)}}(this),this.update=function(n){return function(){return n.regInProgress=!0,n.rest.data=n.form.user,r.updateUser(n.rest).then(function(r){return n.submittedForm=!1,t.go("root.profile",{id:e.id})},function(e){return n.regInProgress=!1})}}(this),this.abort=function(){return n.goBack()},this.deleteAccount=function(){return r.deleteUser(this.form.user.id).then(function(){return t.go("root.home"),r.unauthorized=!0,TokenContainer.delete(),$rootScope.$broadcast("user:stateChanged")},function(e){})},this.init(),this}]),angular.module("mediMeet").controller("RegistrationCtrl",["TokenContainer","User","$state","$scope","$rootScope","companies","Helper",function(e,t,r,n,o,i,s){return this.form={user:{},contact_data:{},company:{}},this.regInProgress=!1,this.errors={},this.companies=i,this.goBack=function(){return s.goBack()},this.register=function(r){return function(){return r.validate()?(r.regInProgress=!0,"Student"!==r.form.user.typus&&(r.form.user.contact_data=r.form.contact_data,r.form.contact_data.company_id||(delete r.form.contact_data.company_id,r.form.company.typus=r.form.user.typus,r.form.company.web=r.form.user.web,r.form.user.company=r.form.company)),t.registerUser(r.form.user).then(function(n){return r.regInProgress=!1,t.user=n.data.user,e.set(n.data.token),t.unauthorized=!1,o.$broadcast("user:stateChanged"),s.goBack()},function(e){return e.status,r.regInProgress=!1})):void 0}}(this),this.validate=function(e){return function(){var t,r,n,o;return o=!0,e.errors={},n=e.form.user,t=e.form.contact_data,r=e.form.company,n.typus||(e.errors.typus=!0,o=!1),n.username&&n.email&&n.password&&n.password_confirmation===n.password||(n.username||(e.errors.username=!0),n.email||(e.errors.email=!0),n.password||(e.errors.password=!0),n.password_confirmation&&n.password===n.password_confirmation||(e.errors.password_confirmation=!0),o=!1),"Student"!==n.typus&&(t.firstname&&t.lastname&&t.plz&&t.ort&&(t.web||t.fon)||(t.firstname||(e.errors.firstname=!0),t.lastname||(e.errors.lastname=!0),t.plz||(e.errors.plz=!0),t.ort||(e.errors.ort=!0),t.web||t.fon||(e.errors.web=!0,e.errors.fon=!0),o=!1),t.company_id||(r.name||(e.errors.company.name=!0,o=!1),r.description||(e.errors.company.description=!0,o=!1))),o}}(this),this}]),angular.module("mediMeet").factory("badrequestHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("conflictHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("forbiddenHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("notfoundHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("unauthorizedHandler",["$injector",function(e){return function(t,r){var n,o;return n=e.get("TokenContainer"),o=e.get("$state"),"invalid_token"===t.data.error.error.name&&((t.data.error.reason="expired")?(n.delete(),o.go("root.home")):(n.delete(),o.go("root.register"))),r.reject(t),r.promise}}]),angular.module("mediMeet").factory("responseInterceptor",["$q","$injector",function(e,t){return{responseError:function(r){var n;switch(n=e.defer(),r.status){case 400:return t.get("badrequestHandler")(r,n);case 401:return t.get("unauthorizedHandler")(r,n);case 403:return t.get("forbiddenHandler")(r,n);case 404:return t.get("notfoundHandler")(r,n);case 409:return t.get("conflictHandler")(r,n);default:return n.reject(r),n.promise}return r}}}]),angular.module("mediMeet").factory("tokenInterceptor",["TokenContainer","Rails",function(e,t){return{request:function(t){var r;return 0===t.url.indexOf("/api/v1/")&&(r=e.get())&&(t.headers.Authorization="Bearer "+r),t}}}]);