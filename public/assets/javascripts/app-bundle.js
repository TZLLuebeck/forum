var app,dependencies;dependencies=["ui.router","restangular","ngStorage","permission","permission.ui","ngFileUpload","toaster"],(app=angular.module("mediMeet",dependencies)).config(["$httpProvider",function(e){return e.interceptors.push("tokenInterceptor"),e.interceptors.push("responseInterceptor")}]),app.run(["User","TokenContainer","$rootScope","$state","$stateParams","Rails","$transitions",function(e,t,r,n,i,o,s){return r.$state=n,r.$stateParams=i,s.onBefore({},function(e){return r.lastState=e.from(),r.lastStateParams=e.params("from")})}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").run(["$q","PermRoleStore","User",function(e,t,r){return t.defineRole("anonymous",function(t){var n;return n=e.defer(),r.isAuthenticated()?n.reject():n.resolve(),n.promise}),t.defineRole("registered",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){var t,r,i,o,s;for(e||n.reject(),o=[],t=0,r=(i=["admin","student","institute","company","klinik"]).length;t<r;t++){if(s=i[t],indexOf.call(e,s)>=0){n.resolve();break}o.push(void 0)}return o},function(){return n.reject()}),n.promise}),t.defineRole("admin",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"admin")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("student",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"student")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("institute",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"institute")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("company",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"company")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise}),t.defineRole("klinik",function(t){var n;return n=e.defer(),r.getRoles().then(function(e){return e||n.reject(),indexOf.call(e,"klinik")>=0?n.resolve():n.reject()},function(){return n.reject()}),n.promise})}]),angular.module("mediMeet").config(["$stateProvider","$urlRouterProvider","$locationProvider",function(e,t,r){return t.otherwise(function(e){return e.get("$state").go("root.home")}),r.html5Mode(!0),r.hashPrefix(""),e.state("root",{url:"",abstract:!0,views:{"header@":{templateUrl:"assets/views/common/nav.html?v=20171006",controller:"NavCtrl",controllerAs:"nav"},"footer@":{templateUrl:"assets/views/common/footer.html?v=20171009"}},resolve:{identity:["TokenContainer","User","$rootScope",function(e,t,r){if(e.get())return t.retrieveUser().then(function(e){return t.user=e,r.$broadcast("user:stateChanged")})}]}}).state("match",{url:"/match/{id}",onEnter:["$state","$stateParams",function(e,t){return e.go("root.interest.hidden",{id:t.id})}]}).state("root.home",{url:"/",views:{"body@":{templateUrl:"assets/views/common/home.html?v=20171011",controller:"HomeCtrl",controllerAs:"home"}}}).state("root.explore",{url:"/explore",params:{category:null},views:{"body@":{templateUrl:"assets/views/common/search.html?v=20171009",controller:"SearchCtrl",controllerAs:"search"}},resolve:{category:["$stateParams","$state",function(e,t){if(e.category)return e.category}],initials:["Interests","$stateParams","$state",function(e,t,r){return t.category?e.getByCategory(t.category).then(function(e){return e},function(e){return r.go("root.home")}):(r.go("root.home"),null)}]}}).state("root.impressum",{url:"/impressum",views:{"body@":{templateUrl:"assets/views/common/impressum.html?v=20171006"}}}).state("root.kontakt",{url:"/kontakt",views:{"body@":{templateUrl:"assets/views/common/kontakt.html?v=20171006"}}}).state("root.agb",{url:"/nutzungsbedingungen",views:{"body@":{templateUrl:"assets/views/common/agb.html?v=20171006"}}}).state("root.antimaas",{url:"/datenschutz",views:{"body@":{templateUrl:"assets/views/common/datenschutz.html?v=20171006"}}}).state("root.register",{url:"/registration",views:{"body@":{templateUrl:"assets/views/users/register.html?v=20171011",controller:"RegistrationCtrl",controllerAs:"reg"}},resolve:{companies:["Company",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.login",{url:"/login",views:{"body@":{templateUrl:"assets/views/users/login.html?v=20171006",controller:"LoginCtrl",controllerAs:"login"}}}).state("forgot_password",{url:"/password_reset",views:{"body@":{templateUrl:"assets/views/users/password.html?v=20171006",controller:"PasswordResetCtrl",controllerAs:"reset"}}}).state("root.profile",{url:"/account",params:{id:null},views:{"body@":{templateUrl:"assets/views/users/profile.html?v=20171006",controller:"ProfileCtrl",controllerAs:"profile"}},resolve:{mydata:["User","$stateParams","$state",function(e,t,r){return e.getUserPacket(t.id).then(function(e){return e.data},function(e){return r.go("root.home")})}],posts:["User","$stateParams",function(e,t){return e.getInterests(t.id).then(function(e){return e.data},function(e){return e})}]}}).state("root.profile.edit",{url:"/edit",params:{id:null},views:{"body@":{templateUrl:"assets/views/users/edit.html?v=20171006",controller:"ProfileEditCtrl",controllerAs:"predit"}},data:{permissions:{except:"anonymous",redirectTo:"root.home"}}}).state("root.profile.interests",{url:"/profiles",views:{"subbody@":{templateUrl:"assets/views/interests/list.html?v=20171006",controller:"InterestsCtrl",controllerAs:"interests"}}}).state("root.company.cmpinterests",{url:"/companies/view/interests",params:{id:null},views:{"subbody@":{templateUrl:"assets/views/interests/company.html?v=20171006",controller:"CompanyInterestCtrl",controllerAs:"cmpint"}}}).state("root.interest",{url:"",abstract:!0,params:{id:null},views:{"body@":{templateUrl:"assets/views/interests/view.html?v=20171006",controller:"InterestCtrl",controllerAs:"intrst"}},resolve:{info:["Interests","$stateParams","$state",function(e,t,r){return null===t.id?(r.go("root.home"),0):e.getInterest(t.id).then(function(e){return e.data},function(e){return 401===e.status?r.go("root.register"):r.go("root.home")})}]}}).state("root.interest.hidden",{url:"/profile",templateUrl:"assets/views/interests/hidden.html?v=20171006",controller:"InterestHiddenCtrl",controllerAs:"ctrl"}).state("root.interest.revealed",{url:"/profile/contact",data:{permissions:{except:"anonymous",redirectTo:"root.interest.hidden"}},templateUrl:"assets/views/interests/revealed.html?v=20171006",controller:"InterestRevealedCtrl",controllerAs:"ctrl",resolve:{contact:["Interests","$stateParams",function(e,t){return e.makeContact(t.id).then(function(e){return e.data},function(e){return e})}]}}).state("root.createinterest",{url:"/create",views:{"body@":{templateUrl:"assets/views/interests/create.html?v=20171006",controller:"NewPostCtrl",controllerAs:"npost"}},data:{permissions:{except:"anonymous",redirectTo:"root.register"}}}).state("root.interest.editinterest",{url:"/edit",params:{id:null},data:{permissions:{except:"anonymous",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/interests/edit.html?v=20171006",controller:"InterestEditCtrl",controllerAs:"intedit"}}}).state("root.companies",{url:"/companies",views:{"body@":{templateUrl:"assets/views/companies/companies.html?v=20171011",controller:"CompaniesCtrl",controllerAs:"cmps"}},resolve:{list:["Company",function(e){return e.getApproved().then(function(e){return e},function(e){return[]})}]}}).state("root.companies.company",{url:"/view",views:{"body@":{templateUrl:"assets/views/companies/company.html?v=20171006",controller:"CompanyCtrl",controllerAs:"cmp"}},params:{id:null},resolve:{comp:["Company","$state","$stateParams",function(e,t,r){return r.id||t.go("root.companies"),e.getOne(r.id).then(function(e){return e.data},function(e){return t.go("root.companies")})}]}}).state("root.companies.newcomp",{url:"/create",data:{permissions:{only:"admin",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/companies/create.html?v=20171011",controller:"NewCompanyCtrl",controllerAs:"ncomp"}}}).state("root.companies.editcomp",{url:"/edit",data:{permissions:{except:"anonymous",redirectTo:"root.home"}},views:{"body@":{templateUrl:"assets/views/companies/edit.html?v=20171011",controller:"EditCompanyCtrl",controllerAs:"ecomp"}},params:{id:null},resolve:{comp:["Company","Helper","$stateParams",function(e,t,r){return r.id||t.goBack(),e.getOne(r.id).then(function(e){return e.data},function(e){return t.goBack()})}]}}).state("root.admin",{url:"/admin",abstract:!0,data:{permissions:{only:"admin",redirectTo:"root.home"}}}).state("root.admin.userlist",{url:"/users",views:{"body@":{templateUrl:"assets/views/admin/users.html?v=20171006",controller:"UserListCtrl",controllerAs:"users"}},resolve:{users:["User",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.usercreate",{url:"/user/new",views:{"body@":{templateUrl:"assets/views/admin/newuser.html?v=20171006",controller:"AdminUserCtrl",controllerAs:"usrcrt"}},resolve:{companies:["Company",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.interestlist",{url:"/profiles",views:{"body@":{templateUrl:"assets/views/admin/interests.html?v=20171006",controller:"InterestListCtrl",controllerAs:"interests"}},resolve:{interest:["Interests",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.interestcreate",{url:"/profiles/new",views:{"body@":{templateUrl:"assets/views/admin/newinterest.html?v=20171006",controller:"AdminInterestCtrl",controllerAs:"intrcrt"}},resolve:{users:["User",function(e){return e.getAll().then(function(e){return e},function(e){return e})}]}}).state("root.admin.companylist",{url:"/companies",views:{"body@":{templateUrl:"assets/views/admin/companies.html?v=20171006",controller:"CompanyListCtrl",controllerAs:"companies"}}}).state("root.admin.statistics",{url:"/statistics",views:{"body@":{templateUrl:"assets/views/admin/statistics.html?v=20171006",controller:"StatisticsCtrl",controllerAs:"stats"}}})}]),angular.module("mediMeet").directive("onScrollToBottom",["$document","$window",function(e,t){return{restrict:"A",link:function(r,n,i){return e.bind("scroll",function(){if(t.pageYOffset+t.innerHeight>=e.height())return r.$apply(i.onScrollToBottom)}),r.$on("$destroy",function(){return e.unbind("scroll")})}}}]),angular.module("mediMeet").directive("tooltips",["$document","$window",function(e,t){return{restrict:"A",link:function(t,r,n){return e.bind("scroll",function(){return e.ready(function(){return $('[data-toggle="tooltip"]').tooltip(),$('[data-toggle="popover"]').popover()})})}}}]),angular.module("mediMeet").factory("Keywords",function(){return this.categories=["Hospital IT 4.0","Medizintechnik 4.0","Facility Management 4.0","Klinische Prozesse 4.0"],this.subcategories=["Cloud/IT-Services/Big Data","Mobile Anwendungen","Daten-/Dokumentenaustausche","Cyber-Security & Privacy","Interoperabilität","Assistenzsysteme","Wartung und Service","Usability","IT-gestützte Instandhaltung","IoT im Krankenhaus","Blue/Green Hospital","Supply-Chain-Management","e-Health/Medical Apps","Digitale Versorgungsplattform","Qualitäts-/Leistungserfassung","Integrierte Prozesse"],this.keywords=["IT-Services","Digital Twin","Big Data","Connected Medical Devices","Mobile Anwendungen/Mobile Devices","Clinical Decision Support","Daten- und Dokumentenaustausch","Condition Monitoring","Cyber-Security/IT-Sicherheit","Telemedizin","Safety/Funktionssicherheit","personalisierte Medizin","Datenschutz/Privacy","elektronische Patientenakte (EPA)","IT-gestützte Instandhaltung/Computerized Maintenance","Medizingeräte/Medical Devices","Internet of Things","Cyber-physical-systems (CPS)","Sustainability/Nachhaltigkeit","Krankenhausinformationssystem (KIS)","Green-/Blue-Hospital","Predicitve Maintenance","Supply-Chain-Management","Processing","Logistik","Clinical Pathways/Behandlungspfade","Interoperabilität","Assistenzsysteme","Wartung und Service","Usability","e-Health","Medical Apps","Clinical Unified Collaboration","Qualitätsmanagement"],this.relations=[{category:"Hospital IT 4.0",description:"Steht für den Einsatz digitaler Technologien zum strukturierten und sicheren Austausch von Informationen u.a. über Krankenhausinformationssysteme.",subcategories:[{subcategory:"Cloud/IT-Services/Big Data",description:"Beschreibt die Bereitstellung von IT-Diensten wie digitale Infratruktur, Plattformen und  Software als Dienste über Modelle wie der Public oder Private Cloud.",keywords:["Big Data-Analyse","Software-Entwicklung","Cloud","IT-Services","Big Data","Internet of Things","Cyber-Security/IT-Sicherheit","Daten-und Dokumentenaustausch"]},{subcategory:"Mobile Anwendungen",description:"Bezeichnet die Verwendung mobiler Endgeräte (Smartphones, Tablets, ...) für verschiedenste  Anwendungen wie Bereitstellung oder Aufnahme relevanter Daten.",keywords:["Software-Entwicklung","Medical Apps","e-Health","Connected Medical Devices","elektronische Patientenakte (EPA)","Krankenhausinformationssystem (KIS)"]},{subcategory:"Daten-/Dokumentenaustausche",description:"Steht für digitaliserte und standardisierte Erfassung und Dokumentation, um Übertragungsfehler und Informationsverlust zu vermeiden.",keywords:["Bildverarbeitung","Bildbearbeitung","Software-Entwicklung","elektronische Patientenakte (EPA)","Krankenhausinformationssystem (KIS)","Qualitätsmanagement"]},{subcategory:"Cyber-Security & Privacy",description:"Beschreibt zum einen die Sicherheit der digitalen Systeme selbst und zum anderen die  Anforderungen an den Schutz der Patientendaten.",keywords:["Software-Entwicklung","Cyber-Security/IT-Sicherheit","Safety/Funktionssicherheit","Datenschutz/Privacy","Cloud"]}]},{category:"Medizintechnik 4.0",description:"Beschreibt die Vernetzung von Medizingeräten, die ihre Daten weitergeben können und ihre Funktionen als digitalen Dienst über Schnittstellen bereitstellen.",subcategories:[{subcategory:"Interoperabilität",description:"Bezeichnet die Fähigkeit unabhängiger, heterogener Systeme hinsichtlich physischer oder virtueller Schnittstellen verwertbare Informationen auszutauschen.",keywords:["Bildverarbeitung","Bildbearbeitung","Biomechatronik","Fluidik und Kompartimentsmodelle","Medizinische Zelltechnologie","Molekulare Medizin","Mustererkennung","Optische Messtechnik","Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Medizingeräte/Medical Devices","Connected Medical Devices"]},{subcategory:"Assistenzsysteme",description:"Dienen der Unterstützung des Krankenhauspersonals in bestimmten Situationen und bei Abläufen, vom Monitoring bis zu klinischen Entscheidungen.",keywords:["Mobile Robotik","Bildverarbeitung","Bildbearbeitung","Biomechatronik","Fluidik und Kompartimentsmodelle","Medizinische Zelltechnologie","Molekulare Medizin","Mustererkennung","Optische Messtechnik","Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Cyber-physical-systems (CPS)"]},{subcategory:"Wartung und Service",description:"Mithilfe moderner IT erlauben neue Möglichkeiten wie Tele-Inspektion und prädiktive Instandhaltung, um Fehler und Ausfälle zu reduzieren.",keywords:["Bildverarbeitung","Bildbearbeitung","Biomechatronik","Fluidik und Kompartimentsmodelle","Medizinische Zelltechnologie","Molekulare Medizin","Mustererkennung","Optische Messtechnik","Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Condition Monitoring","Predicitve Maintenance"]},{subcategory:"Usability",description:"Bezeichnet die Bedienbarkeit von Geräten und erhält durch Vernetzung und Technologien wie Virtual und Augmented Reality ganz neue Möglichkeiten.",keywords:["Virtual Reality","Usability-Engineering","Bildverarbeitung","Bildbearbeitung","Biomechatronik","Fluidik und Kompartimentsmodelle","Medizinische Zelltechnologie","Molekulare Medizin","Mustererkennung","Optische Messtechnik","Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Connected Medical Devices","Cyber-physical-systems (CPS)","Telemedizin"]}]},{category:"Facility Management 4.0",description:"Bezeichnet die Verwendung u.a. von Cloud- und IoT-Technologien bei der Wartung und Instandhaltung von Anlagen und Infrastruktur sowie der Logistik.",subcategories:[{subcategory:"IT-gestützte Instandhaltung",description:"Beschreibt, wie durch IT Anlagen und Infrastrukturen selbst für ihre Instandhaltung relevante Daten erfassen und so Wartungsbedarf selbst melden können.",keywords:["Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Condition Monitoring","Predicitve Maintenance","Internet of Things","Smart Device"]},{subcategory:"IoT im Krankenhaus",description:"Bezeichnet die Vernetzung bzw. Kommunikation von „Dingen“ bzw. Geräten, sogenannten „smart devices“, u.a. um Personen- oder Objekte zu lokalisieren.",keywords:["Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Smart Devices","Digital Twin","Cloud","elektronische Patienteakte","connected medical device","clinical decision support","Telemedzin","Cyber-physical-systems (CPS)"]},{subcategory:"Blue/Green Hospital",description:"Steht für mehr Nachhaltigkeit im Krankenhausbetrieb, nicht nur bzgl. Verbrauch an Energie und Waren, sondern auch bzgl. Personal- und Patientenzufriedenheit.",keywords:["Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Nachhaltigkeit/Sustainability","Supply-Chain-Management","Clinical Pathways","Internet of Things","Qualitätsmanagement"]},{subcategory:"Supply-Chain-Management",description:"Bezeichnet den Ansatz, Wertschöpfungs- und Lieferketten ganzheitlich über Unternehmens- und Einrichtungsgrenzen hinweg zu organisieren und zu steuern.",keywords:["Robotik und kognitive Systeme","Signalverarbeitung","Software-Entwicklung","Logistik","Mobile Anwendungen/Mobile Devices","Internet of Things","Medical Apps","Qualitätsmanagement","Smart Devices"]}]},{category:"Klinische Prozesse 4.0",description:"Steht für IT-gestützte klinische Prozesssysteme und Anwendungen, die administrative und gesundheitsversorgende Abläufe im Unternehmen Krankenhaus regeln.",subcategories:[{subcategory:"e-Health/Medical Apps",description:"Steht zum einen für die Digitalisierung im Gesundheitswesen und zum anderen medizinische Softwareprodukte für hauptsächlich mobile Endgeräte.",keywords:["Software-Entwicklung","e-Health","Medical Apps","personalisierte Medizin","elektronische Patientenakte (EPA)","Telemedizin","Smart Devices","Internet of Things","Datenschutz","Usability"]},{subcategory:"Digitale Versorgungsplattform",description:"Versteht man die Integration verschiedener Kommunikationswege wie Audio- und Video- Konferenzen, virtuellen white boards etc. auf eine einheitliche Plattform.",keywords:["Software-Entwicklung","IT-Service","Daten- und Dokumentenaustausch","Interoperabilität","Usability","Integrierte Prozesse","Telemedizin"]},{subcategory:"Qualitäts-/Leistungserfassung",description:"Soll u.a. durch mobile Anwendungen zunehmend automatisiert erfolgen, um mehr Transparenz zu gewährleisten und Dokumentationslücken zu vermeiden.",keywords:["Software-Entwicklung","Qualitätsmanagement","Daten- und Dokumentenaustausch","Datenschutz/Privacy","elektronische Patientenakte (EPA)"]},{subcategory:"Integrierte Prozesse",description:"Sorgen für effektivere Behandlungsabläufe, indem automatisierte Vorgänge nicht einzeln betrachtet, sondern über gesamte Prozesse integriert werden.",keywords:["Software-Entwicklung","Clinical Pathways/Behandlungspfade","Krankenhausinformationssystem (KIS)","Qualitätsmanagement"]}]}],{categories:this.categories,subcategories:this.subcategories,keywords:this.keywords,relations:this.relations}}),angular.module("mediMeet").factory("mediREST",["Rails","Restangular",function(e,t){return t.withConfig(function(t){return""+e.database,t.setBaseUrl("/api/v1"),t.setDefaultHeaders({"Content-Type":"application/json"}),t.setRequestSuffix(".json")})}]),angular.module("mediMeet").filter("interestFilter",function(){return function(e,t){var r,n,i,o,s;if(s=[],!t)return e;for(i=0,o=e.length;i<o;i++)n=e[i],r=!1,t.subcategory&&n.subcategory!==t.subcategory&&"Beliebig"!==n.subcategory&&(r=!0),t.offer&&n.offer!==t.offer&&(r=!0),t.typus&&n.typus!==t.typus&&(r=!0),r||s.push(n);return s}}),angular.module("mediMeet").service("Company",["mediREST","$q","Upload","Rails",function(e,t,r,n){var i,o,s,a,u,c,l;return o=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/companies/",data:{data:e}}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},a=function(){var r;return r=t.defer(),e.one("companies").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},u=function(){var r;return r=t.defer(),e.one("companies").one("approve").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},c=function(r){var n,i;return n=t.defer(),i=e.one("companies"),i.id=r,i.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},l=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/companies/"+e.id,data:{data:e},method:"PUT"}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},i=function(r){var n,i;return n=t.defer(),i=e.one("companies").one("approve"),i.id=r,i.put().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},s=function(r){var n,i;return n=t.defer(),i=e.one("companies"),i.id=r,i.remove().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},{createCompany:o,getAll:a,getApproved:u,getOne:c,update:l,approve:i,destroy:s}}]),angular.module("mediMeet").service("Helper",["$rootScope","$state",function(e,t){var r;return r=function(r){var n,i;return n=e.lastState,i=e.lastStateParams,n.name?t.go(n.name,i):t.go("root.home")},{goBack:r}}]),angular.module("mediMeet").service("Interests",["mediREST","$q","Upload",function(e,t,r){var n,i,o,s,a,u,c,l,d,f;return i=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/interests/",data:{data:e},arrayKey:"[]"}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},n=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/interests/create/",data:{data:e},arrayKey:"[]"}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},a=function(){var r;return r=t.defer(),e.one("interests").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e.data.error)}),r.promise},u=function(r){var n,i,o;return n=t.defer(),i=e.one("interests").one("category"),o={category:r},i.customGET("",o).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.data)}),n.promise},c=function(r){var n,i;return n=t.defer(),i=e.one("interests"),i.id=r,i.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},f=function(r){var n,i;return n=t.defer(),i=e.one("interests").one("contact"),i.id=r,i.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},l=function(){var r;return r=t.defer(),e.one("interests").one("keywords").get().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},d=function(){var r;return r=t.defer(),e.one("interests").one("target").get().then(function(e){return r.resolve(e)},function(e){return r.reject(e)}),r.promise},s=function(e){var n;return n=t.defer(),r.upload({url:"/api/v1/interests/",data:{data:e},arrayKey:"[]",method:"PUT"}).then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},o=function(r){var n,i;return n=t.defer(),i=e.one("interests"),i.id=r,i.remove().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},{createInterest:i,assignInterest:n,getAll:a,getInterest:c,makeContact:f,getKeywords:l,getRandom:d,getByCategory:u,editInterest:s,deleteInterest:o}}]),angular.module("mediMeet").service("SharedData",function(){var e,t,r,n;return e={},n=function(t,r){return e[t]=r},r=function(t){return e[t]},t=function(t){return e[t]=null},{setValue:n,getValue:r,deleteValue:t}}),angular.module("mediMeet").service("TokenContainer",["$localStorage","Rails","$rootScope","$timeout",function(e,t,r,n){var i,o,s,a,u;return u=function(t){var r,n,i;return i={token:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token},r=+new Date,n=r+1e3*i.expiresIn,e.token=angular.extend(i,{expiresAt:n})},s=function(){var e;return(e=i())?e.token:null},a=function(){var e;return(e=i())?e:null},i=function(){return e.token||null},o=function(){return delete e.token,n(function(){return r.$broadcast("user:token_invalid"),r.$broadcast("user:stateChanged")})},{get:s,getRaw:a,set:u,delete:o}}]),angular.module("mediMeet").service("User",["mediREST","$q","$http","Rails","$rootScope","Upload",function(e,t,r,n,i,o){var s,a,u,c,l,d,f,m,g,h,p,y,v,b;return b=e.one("users"),this.user=null,this.deferreds={},this.unauthorized=!0,h=function(e){var r;return r=t.defer(),o.upload({url:"/api/v1/users/",data:{data:e}}).then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},s=function(e){var r,n;return r=t.defer(),n=b.one("create"),n.data=e,n.post().then(function(e){return r.resolve(e.data)},function(e){return r.reject(e)}),r.promise},u=function(){var e;return e=t.defer(),b.get().then(function(t){return e.resolve(t.data)},function(t){return e.reject(t)}),e.promise},d=function(r){var n,i;return n=t.defer(),i=e.one("users"),i.id=r||"me",i.get().then(function(e){return n.resolve(e.data)},function(e){return n.reject(e.error)}),n.promise},f=function(r){var n,i;return n=t.defer(),i=e.one("users"),i.id=r||"me",i.get().then(function(e){return n.resolve(e)},function(e){return n.reject(e)}),n.promise},y=function(r){return function(){var n,i;return n=t.defer(),m()?(n.resolve(r.user),n.promise):r.deferreds.me?r.deferreds.me.promise:(r.deferreds.me=n,i=e.one("users"),i.id="me",i.get().then(function(e){return r.unauthorized=!1,r.user=e.data,r.deferreds.me.resolve(e.data),delete r.deferreds.me},function(e){return r.deferreds.me.reject(),delete r.deferreds.me}),r.deferreds.me.promise)}}(this),l=function(e){return function(){var r;return r=t.defer(),m()?r.resolve(e.user.roles):y().then(function(e){return r.resolve(e.roles)},function(){return r.reject()}),r.promise}}(this),c=function(r){return function(n){var i,o;return i=t.defer(),o=e.one("users").one("interests"),o.id=n||r.user.id,o.get().then(function(e){return i.resolve(e)},function(e){return i.reject(e)}),i.promise}}(this),v=function(r){var n,i;return i=e.one("users"),n=t.defer(),Object.assign(i,r.data[0]),r.put().then(function(e){return 422===e.status?n.reject(e.data):n.resolve(e.data.data)},function(e){return n.reject(e)}),n.promise},p=function(r){var n,i;return i=e.one("users").one("reset"),n=t.defer(),i.data=r,i.post().then(function(e){return n.resolve(e.data)},function(e){return n.reject(e)}),n.promise},g=function(r){return function(){var n;return n=t.defer(),e.all("users").one("logout").remove().then(function(e){return r.user=null,r.unauthorized=!0,n.resolve(e)},function(e){return n.reject(e)}),n.promise}}(this),a=function(r){return function(n){var i,o;return i=t.defer(),o=e.one("users"),o.id=n,o.remove().then(function(e){return 401===e.status?(r.unauthorized=!0,i.reject(e.data)):i.resolve()}),i.promise}}(this),m=function(e){return function(){return!e.unauthorized&&null!=e.user}}(this),{getAll:u,getUser:d,getUserPacket:f,getRoles:l,getInterests:c,retrieveUser:y,updateUser:v,resetPassword:p,logout:g,deleteUser:a,registerUser:h,adminReg:s,isAuthenticated:m}}]),angular.module("mediMeet").controller("AdminInterestCtrl",["Interests","Keywords","users","$state",function(e,t,r,n){return this.anyCat={category:"Beliebig",subcategories:[{subcategory:"Beliebig"}]},this.anySubCat={subcategory:"Beliebig"},this.userlist=r,this.categories=angular.copy(t.relations),this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.changeOffer=function(e){return function(){var t,r;if("search"===e.form.interest.offer){if(e.categories.push(e.anyCat),e.category)return e.subcategories.push(e.anySubCat)}else if(e.category&&"Beliebig"===e.category.category&&(e.category=null,e.subcategories=[]),e.subcategory&&"Beliebig"===e.subcategory.subcategory&&(e.subcategory=null),t=e.categories.indexOf(e.anyCat),r=e.subcategories.indexOf(e.anySubCat),t>-1&&e.categories.splice(t,1),r>-1)return e.subcategories.splice(r,1)}}(this),this.changeCategory=function(e){return function(){return e.subcategories=angular.copy(e.category.subcategories),"search"===e.form.interest.offer&&"Beliebig"!==e.category.category&&e.subcategories.push(e.anySubCat),e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.create_post=function(t){return function(){return t.form.interest.category=t.category.category,"Beliebig"===t.category.category?(t.form.interest.subcategory="Beliebig",t.form.interest.keywords=[]):t.form.interest.subcategory=t.subcategory.subcategory,e.assignInterest(t.form.interest).then(function(e){return n.go("root.admin.interestlist")})}}(this),this.abort=function(){return Helper.goBack()},this}]),angular.module("mediMeet").controller("AdminUserCtrl",["User","$state","companies",function(e,t,r){return this.form={user:{},contact_data:{},company:{}},this.regInProgress=!1,this.errors={},this.companies=r,this.goBack=function(){return Helper.goBack()},this.register=function(r){return function(){return r.validate()?(r.regInProgress=!0,"Data"===r.form.user.typus&&"Statistics"===r.form.user.typus||(r.form.user.contact_data=r.form.contact_data),e.adminReg(r.form.user).then(function(e){return r.regInProgress=!1,t.go("root.admin.userlist")},function(e){return e.status,r.regInProgress=!1})):void 0}}(this),this.validate=function(e){return function(){var t,r,n;return n=!0,e.errors={},r=e.form.user,t=e.form.contact_data,e.form.company,r.typus||(e.errors.typus=!0,n=!1),r.username&&r.email&&r.password&&r.password_confirmation===r.password||(r.username||(e.errors.username=!0),r.email||(e.errors.email=!0),r.password||(e.errors.password=!0),r.password_confirmation&&r.password===r.password_confirmation||(e.errors.password_confirmation=!0),n=!1),"Data"!==r.typus&&"Statistics"!==r.typus&&(t.firstname&&t.lastname&&t.plz&&t.ort&&(t.web||t.fon)||(t.firstname||(e.errors.firstname=!0),t.lastname||(e.errors.lastname=!0),t.plz||(e.errors.plz=!0),t.ort||(e.errors.ort=!0),t.web||t.fon||(e.errors.web=!0,e.errors.fon=!0),n=!1),t.company_id||(e.errors.company=!0,n=!1)),n}}(this),this}]),angular.module("mediMeet").controller("CompanyListCtrl",["$state","Company","$scope",function(e,t,r){return this.unlocked=!1,this.resetSettings=function(e){return function(){return e.finishedLoading=!1,e.companyList=[]}}(this),this.resetSettings(),this.init=function(e){return function(){return t.getAll().then(e.compsReceived,function(){})}}(this),this.compsReceived=function(e){return function(t){e.finishedLoading=!0,e.companyList=angular.copy(t)}}(this),this.getCompany=function(t){return e.go("root.companies.company",{id:t})},this.approveCompany=function(e){return t.approve(e.id).then(function(t){return e.validated=!0},function(e){})},this.deleteCompany=function(e){return function(r){return t.destroy(r.id).then(function(t){return e.companyList.splice(e.companyList.indexOf(r),1)},function(e){})}}(this),this.init(),this}]),angular.module("mediMeet").controller("InterestListCtrl",["$state","User","Interests","$scope","interest",function(e,t,r,n,i){return this.posts=i,this.edit=function(t){return e.go("root.interest.editinterest",{id:t})},this.viewPost=function(t){return e.go("root.interest.hidden",{id:t})},this.getUser=function(t){return e.go("root.interest",{id:t})},this.deletePost=function(e){return function(t){return r.deleteInterest(t.id).then(function(r){var n;return n=e.posts.indexOf(t),e.posts.splice(n,1)},function(e){})}}(this),this}]),angular.module("mediMeet").controller("UserListCtrl",["$state","User","$scope","users",function(e,t,r,n){return this.resetSettings=function(e){return function(){return e.finishedLoading=!1,e.userList=n}}(this),this.resetSettings(),this.init=function(e){return function(){return e.reverse=!1,t.getAll().then(e.usersReceived,function(){})}}(this),this.usersReceived=function(e){return function(t){return e.finishedLoading=!0,e.userList=angular.copy(t)}}(this),this.getUser=function(t){return e.go("root.profile",{id:t})},this.editUser=function(t){return e.go("root.profile.edit",{id:t})},this.deleteUser=function(e){return function(r){return t.deleteUser(r.id).then(function(t){var n;return n=e.userList.indexOf(r),e.userList.splice(n,1)})}}(this),this}]),angular.module("mediMeet").controller("CompaniesCtrl",["Company","list","$state",function(e,t,r){return this.companyList=t,this.viewCompany=function(e){return r.go("root.companies.company",{id:e})},this}]),angular.module("mediMeet").controller("HomeCtrl",["$state","Interests",function(e,t){return this.keywords=[],this.ints=[],this.getTargetedInterests=function(e){return function(){return t.getRandom().then(function(t){return e.ints=t.data},function(e){})}}(this),this.init=function(e){return function(){return t.getKeywords().then(function(t){return e.keywords=t},function(e){}),e.getTargetedInterests()}}(this),this.searchPage=function(t){return e.go("root.explore",{category:t})},this.init(),this}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").controller("NavCtrl",["$timeout","$scope","mediREST","User","TokenContainer","$state","$rootScope","toaster",function(e,t,r,n,i,o,s,a){return this.form={},this.username="default",this.admin=!1,this.init=function(e){return function(){return e.isAuthenticated=!1,e.setLoggedIn(i.get()),e.setUsername(),e.isAdmin()}}(this),this.login=function(e){return function(){var t;return t=r.one("users").one("login"),t.data={username:e.form.user.username,password:e.form.user.password},t.post().then(function(t){return e.form={},n.user=t.data.user,i.set(t.data.token),s.$broadcast("user:stateChanged")},function(t){if(404===t.status&&(e.form.user.password="",a.pop("error","Nicht vorhanden.","Es wurde kein Account mit diesem Accountnamen gefunden.")),403===t.status&&"wrong_password"===t.data.error.name)return e.form.user.password="",a.pop("error","Falsches Passwort","Das eingegebene Passwort war falsch.")})}}(this),this.setUsername=function(e){return function(){if(e.isAuthenticated)return n.retrieveUser().then(function(t){return e.username=angular.copy(t.username)},function(e){this.username="Angemeldet"})}}(this),this.setLoggedIn=function(e){return function(t){e.isAuthenticated=!!t}}(this),this.logout=function(){return n.logout().then(function(){return i.delete(),o.go("root.home")})},this.isAdmin=function(e){return function(){return n.user&&indexOf.call(n.user.roles,"admin")>=0?e.admin=!0:e.admin=!1}}(this),s.$on("user:stateChanged",function(e){return function(t,r,n){return e.setLoggedIn(i.get()),e.setUsername(),e.isAdmin()}}(this)),this.init(),this}]),angular.module("mediMeet").controller("SearchCtrl",["Interests","$stateParams","$state","Keywords","initials","category",function(e,t,r,n,i,o){return this.list=i,this.category=o,this.subcategories=[],this.subfilter,this.typefilter,this.searchfilter,this.filter=null,this.page=1,this.checkFilter=function(e){return function(){return e.subfilter||e.typefilter||e.searchfilter?(e.filter={},e.subfilter&&(e.filter.subcategory=e.subfilter),e.typefilter&&(e.filter.typus=e.typefilter),e.searchfilter?e.filter.offer=e.searchfilter:void 0):e.filter=null}}(this),this.init=function(e){return function(){var r,i,o,s,a;for(a=[],r=0,i=(o=n.relations).length;r<i;r++){if((s=o[r]).category===t.category){e.subcategories=s.subcategories;break}a.push(void 0)}return a}}(this),this.viewPost=function(e){return r.go("root.interest.hidden",{id:e})},this.loadMore=function(e){return function(){return e.page++}}(this),this.init(),this}]),angular.module("mediMeet").controller("CompanyCtrl",["comp","$state",function(e,t){return this.company=e.company,this.company.posts=e.posts,this.viewInterest=function(e){return t.go("root.interest.hidden",{id:e})},this}]),angular.module("mediMeet").controller("EditCompanyCtrl",["Company","Helper","comp",function(e,t,r){return this.form={company:r.company},this.form.company.parent||delete this.form.company.parent,delete this.form.company.logo,this.submit=function(r){return function(){return e.update(r.form.company).then(function(e){return t.goBack()},function(e){})}}(this),this.goBack=function(){return t.goBack()},this}]),angular.module("mediMeet").controller("NewCompanyCtrl",["Company","$state",function(e,t){return this.form={company:{}},this.submit=function(r){return function(){return e.createCompany(r.form.company).then(function(e){return t.go("root.admin.companylist")},function(e){})}}(this),this}]),angular.module("mediMeet").controller("InterestCtrl",["info","$scope","User","$state",function(e,t,r,n){return this.interest=e,this.init=function(e){return function(){return e.interest.user_id===r.user.id?t.myint=!0:t.myint=!1}}(this),this.back=function(e){return function(){return n.go("root.explore",{category:e.interest.category})}}(this),this.init(),this}]),angular.module("mediMeet").controller("InterestEditCtrl",["Interests","$state","$stateParams","Keywords","Helper",function(e,t,r,n,i){return this.anyCat={category:"Beliebig",subcategories:[{subcategory:"Beliebig"}]},this.anySubCat={subcategory:"Beliebig"},this.categories=angular.copy(n.relations),this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.rest={},this.reason="",this.changeOffer=function(e){return function(){var t,r;if("search"===e.form.interest.offer){if(e.categories.push(e.anyCat),e.category)return e.subcategories.push(e.anySubCat)}else if(e.category&&"Beliebig"===e.category.category&&(e.category=null,e.subcategories=[]),e.subcategory&&"Beliebig"===e.subcategory.subcategory&&(e.subcategory=null),t=e.categories.indexOf(e.anyCat),r=e.subcategories.indexOf(e.anySubCat),t>-1&&e.categories.splice(t,1),r>-1)return e.subcategories.splice(r,1)}}(this),this.init=function(n){return function(){return e.getInterest(r.id).then(n.postReceived,function(){return t.go("root.admin.users")})}}(this),this.postReceived=function(e){return function(t){var r,n,i,o,s,a,u,c,l;for(e.rest=t,e.form.interest=angular.copy(e.rest.data),delete e.form.interest.attachment,"search"===e.form.interest.offer&&e.categories.push(e.anyCat),n=0,o=(a=e.categories).length;n<o;n++)if((r=a[n]).category===e.form.interest.category){e.category=r,e.subcategories=angular.copy(e.category.subcategories);break}for((e.form.interest.offer="search")&&e.subcategories.push(e.anySubCat),c=[],i=0,s=(u=e.subcategories).length;i<s;i++){if((l=u[i]).subcategory===e.form.interest.subcategory){e.subcategory=l,e.keywords=e.subcategory.keywords;break}c.push(void 0)}return c}}(this),this.changeCategory=function(e){return function(){return e.subcategories=angular.copy(e.category.subcategories),"search"===e.form.interest.offer&&"Beliebig"!==e.category.category&&e.subcategories.push(e.anySubCat),e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.update=function(t){return function(){return t.form.interest.category=t.category.category,"Beliebig"===t.category.category?t.form.interest.subcategory="Beliebig":t.form.interest.subcategory=t.subcategory.subcategory,t.rest.data=t.form.interest,e.editInterest(t.form.interest).then(function(e){return i.goBack()},function(e){})}}(this),this.abort=function(){return i.goBack()},this.deleteInterest=function(){return e.deleteInterest(this.form.interest.id).then(function(){return t.go("root.profile")},function(e){})},this.init(),this}]),angular.module("mediMeet").controller("InterestHiddenCtrl",["$state","$stateParams","$scope",function(e,t,r){return this.mine=r.myint,this.reveal=function(){return e.go("root.interest.revealed")},this.edit=function(){return e.go("root.interest.editinterest",{id:t.id})},this}]),angular.module("mediMeet").controller("InterestRevealedCtrl",["contact",function(e){return this.user=e,this.init=function(e){return function(){return Interests.makeContact($stateParams.id).then(function(t){e.user=angular.copy(t.data)})}}(this),this}]),angular.module("mediMeet").controller("NewPostCtrl",["User","Interests","$state","Keywords","Helper",function(e,t,r,n,i){return this.anyCat={category:"Beliebig",subcategories:[{subcategory:"Beliebig"}]},this.anySubCat={subcategory:"Beliebig"},this.categories=angular.copy(n.relations),this.category=null,this.subcategories=[],this.subcategory=null,this.keywords=[],this.form={interest:{}},this.changeOffer=function(e){return function(){var t,r;if("search"===e.form.interest.offer){if(e.categories.push(e.anyCat),e.category)return e.subcategories.push(e.anySubCat)}else if(e.category&&"Beliebig"===e.category.category&&(e.category=null,e.subcategories=[]),e.subcategory&&"Beliebig"===e.subcategory.subcategory&&(e.subcategory=null),t=e.categories.indexOf(e.anyCat),r=e.subcategories.indexOf(e.anySubCat),t>-1&&e.categories.splice(t,1),r>-1)return e.subcategories.splice(r,1)}}(this),this.changeCategory=function(e){return function(){return e.subcategories=angular.copy(e.category.subcategories),"search"===e.form.interest.offer&&"Beliebig"!==e.category.category&&e.subcategories.push(e.anySubCat),e.subcategory=null,e.keywords=[],e.form.interest.keywords=[]}}(this),this.changeSubcategory=function(e){return function(){return e.keywords=e.subcategory.keywords,e.form.interest.keywords=[]}}(this),this.create_post=function(e){return function(){return e.form.interest.category=e.category.category,"Beliebig"===e.category.category?(e.form.interest.subcategory="Beliebig",e.form.interest.keywords=[]):e.form.interest.subcategory=e.subcategory.subcategory,t.createInterest(e.form.interest).then(function(e){return r.go("root.admin.interestlist")})}}(this),this.abort=function(){return i.goBack()},this}]),angular.module("mediMeet").controller("PasswordResetCtrl",["User","$state","Helper",function(e,t,r){return this.accountname=null,this.ajaxInProgress=!1,this.send=function(r){return function(){if(r.ajaxInProgress=!0,r.accountname)return e.resetPassword(r.accountname).then(function(e){return this.ajaxInProgress=!1,t.go("root.home")},function(e){return this.ajaxInProgress=!1})}}(this),this.abort=function(){return r.goBack()},this}]);var indexOf=[].indexOf||function(e){for(var t=0,r=this.length;t<r;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("mediMeet").controller("ProfileCtrl",["User","$state","$stateParams","mydata","posts",function(e,t,r,n,i){return this.user=n,this.interestList=i,this.id=r.id,this.canEdit=!1,this.init=function(t){return function(){if(e.user.id===t.user.id||indexOf.call(e.user.roles,"admin")>=0)return t.canEdit=!0}}(this),this.editProfile=function(e){return function(){return t.go("root.profile.edit",{id:e.id})}}(this),this.getInterests=function(t){return function(){if(!t.interestList.length)return e.getInterests(t.id).then(t.gotInterests,function(){})}}(this),this.gotInterests=function(e){return function(t){return e.interestList=angular.copy(t.data)}}(this),this.editInterest=function(e){return t.go("root.interest.editinterest",{id:e})},this.init(),this}]),angular.module("mediMeet").controller("ProfileEditCtrl",["$stateParams","$state","User","Helper","toaster",function(e,t,r,n,i){return this.form={user:{}},this.regInProgress=!1,this.rest={},this.init=function(n){return function(){return r.getUserPacket(e.id).then(n.userReceived,function(){return t.go("root.admin.users")})}}(this),this.userReceived=function(e){return function(t){return e.rest=t,e.form.user=angular.copy(e.rest.data)}}(this),this.update=function(n){return function(){return n.regInProgress=!0,n.rest.data=n.form.user,r.updateUser(n.rest).then(function(r){return n.regInProgress=!1,n.submittedForm=!1,t.go("root.profile",{id:e.id},{reload:!0})},function(e){switch(e.status){case 403:i.pop("error","Falsches Passwort","Das eingegebene Passwort war falsch.")}return n.regInProgress=!1})}}(this),this.abort=function(){return n.goBack()},this.deleteAccount=function(){return r.deleteUser(this.form.user.id).then(function(){return t.go("root.home"),r.unauthorized=!0,TokenContainer.delete(),$rootScope.$broadcast("user:stateChanged")},function(e){})},this.init(),this}]),angular.module("mediMeet").controller("RegistrationCtrl",["TokenContainer","User","$state","$scope","$rootScope","companies","Helper",function(e,t,r,n,i,o,s){return this.form={user:{},contact_data:{},company:{}},this.regInProgress=!1,this.errors={},this.serverside={},this.companies=o,this.goBack=function(){return s.goBack()},this.register=function(r){return function(){return r.validate()?(r.serverside={},r.regInProgress=!0,"Student"!==r.form.user.typus&&(r.form.user.contact_data=r.form.contact_data,r.form.contact_data.company_id||(delete r.form.contact_data.company_id,r.form.company.typus=r.form.user.typus,r.form.company.website=r.form.contact_data.web,r.form.user.company=r.form.company)),t.registerUser(r.form.user).then(function(n){return r.regInProgress=!1,t.user=n.data.user,e.set(n.data.token),t.unauthorized=!1,i.$broadcast("user:stateChanged"),s.goBack()},function(e){switch(e.status){case 409:if("email_exists"===e.data.error)return r.errors.email.msg="Ein Account mit dieser Email-Addresse existiert bereits.";if("username_exists"===e.error)return r.errors.username.msg="Ein Account mit diesem Namen existiert bereits.";break;case 400:return r.serverside=e.errors}})):void 0}}(this),this.validate=function(e){return function(){var t,r,n,i;return i=!0,e.errors={},n=e.form.user,t=e.form.contact_data,r=e.form.company,n.typus||(e.errors.typus=!0,i=!1),n.username&&n.email&&n.password&&n.password_confirmation===n.password||(n.username||(e.errors.username=!0),n.email||(e.errors.email=!0),n.password||(e.errors.password=!0),n.password_confirmation&&n.password===n.password_confirmation||(e.errors.password_confirmation=!0),i=!1),"Student"!==n.typus&&(t.firstname&&t.lastname&&t.plz&&t.ort&&(t.web||t.fon)||(t.firstname||(e.errors.firstname=!0),t.lastname||(e.errors.lastname=!0),t.plz||(e.errors.plz=!0),t.ort||(e.errors.ort=!0),t.web||t.fon||(e.errors.web=!0,e.errors.fon=!0),i=!1),t.company_id||(r.name||(e.errors.company.name=!0,i=!1),r.description||(e.errors.company.description=!0,i=!1))),i}}(this),this}]),angular.module("mediMeet").factory("badrequestHandler",["$injector",function(e){return function(e,t){var r,n,i,o,s,a,u,c;for(r={},n=0,o=(a=e.data.error).length;n<o;n++)for(i=0,s=(u=a[n].messages).length;i<s;i++)r[(c=u[i].split(":"))[0]]=c[1];return t.reject({status:400,errors:r}),t.promise}}]),angular.module("mediMeet").factory("conflictHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("forbiddenHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("notfoundHandler",["$injector",function(e){return function(e,t){return t.reject(e),t.promise}}]),angular.module("mediMeet").factory("unauthorizedHandler",["$injector",function(e){return function(t,r){var n,i;return n=e.get("TokenContainer"),i=e.get("$state"),"invalid_token"===t.data.error.error.name&&((t.data.error.reason="expired")?(n.delete(),i.go("root.home")):(n.delete(),i.go("root.register"))),r.reject(t),r.promise}}]),angular.module("mediMeet").factory("responseInterceptor",["$q","$injector",function(e,t){return{responseError:function(r){var n;switch(n=e.defer(),r.status){case 400:return t.get("badrequestHandler")(r,n);case 401:return t.get("unauthorizedHandler")(r,n);case 403:return t.get("forbiddenHandler")(r,n);case 404:return t.get("notfoundHandler")(r,n);case 409:return t.get("conflictHandler")(r,n);default:return n.reject(r),n.promise}return r}}}]),angular.module("mediMeet").factory("tokenInterceptor",["TokenContainer","Rails",function(e,t){return{request:function(t){var r;return 0===t.url.indexOf("/api/v1/")&&(r=e.get())&&(t.headers.Authorization="Bearer "+r),t}}}]);